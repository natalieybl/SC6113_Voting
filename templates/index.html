<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberpunk President Voting DApp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">        
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container mt-5">
        <!-- Connect to MetaMask -->
        <button id="connectButton" class="btn btn-neon">Connect to MetaMask</button>
        <hr>
        <h1 class="text-neon text-center">Welcome to Cyberpunk President Voting DApp</h1>

        <!-- Voting status and voting options -->
        <div id="votingStatus" class="mt-5">
            <b class="text-neon">Voting Status: <span id="votingStatusText" class="text-neon">Not Started</span></b>
        </div>

        <!-- Owner's panel to manage proposals, voters, and start voting -->
        <div id="ownerPanel" class="mt-4" style="display:none;">
            <h3 class="text-neon">Owner Panel</h3>

            <!-- Start/End voting buttons -->
            <button class="btn btn-success neon-btn" id="startVotingButton">Start Voting</button>
            <button class="btn btn-danger neon-btn" id="endVotingButton">End Voting</button>

            <div class="container mt-4">
                <!-- Row for Add Proposal and Add Voter Sections -->
                <div class="row">
                    <!-- Add Proposal Section (6 columns) -->
                    <div class="col-md-6">
                        <b class="text-neon">Add Proposal</b>
                        <input type="text" id="proposalDescription" class="form-control" placeholder="Please add candidate">
                        <button class="btn btn-neon mt-2" id="addProposalButton">Add Proposal</button>
                    </div>
            
                    <!-- Add Voter Section (6 columns) -->
                    <div class="col-md-6">
                        <b class="text-neon">Register Voter</b>
                        <input type="text" id="voterAddress" class="form-control" placeholder="Please add voter">
                        <button class="btn btn-neon mt-2" id="registerVoterButton">Register Voter</button>
                    </div>
                </div>
            </div>
            <br>
            
            <!-- Proposals Table -->
            <b class="text-neon">Proposals</b>
            <div class="table-responsive">
                <table id="proposalsTable" class="table table-striped table-hover neon-table">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Candidate Name</th>
                            <th>Votes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic content will be added here -->
                    </tbody>
                </table>
            </div>

            <!-- Voters Table -->
            <b class="text-neon">Registered Voters</b>
            <div class="table-responsive">
                <table id="votersTable" class="table table-striped table-hover neon-table">
                    <thead>
                        <tr>
                            <th>Voter's Address</th>
                            <th>Registered</th>
                            <th>Has Voted</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic content will be added here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Non-owner panel to view proposals and voters -->
        <div id="nonOwnerPanel" class="mt-4" style="display:none;">
            <h3 class="text-neon">Voter Panel</h3>

            <!-- Voter Proposals Table -->
            <b class="text-neon">Voter Proposals</b>
            <div class="table-responsive">
                <table id="voterProposalsTable" class="table table-striped table-hover neon-table">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Proposal Name</th>
                            <th>Votes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic content will be added here -->
                    </tbody>
                </table>
            </div>

            <!-- Voter Voters Table -->
            <b class="text-neon">Voter List</b>
            <div class="table-responsive">
                <table id="voterVotersTable" class="table table-striped table-hover neon-table">
                    <thead>
                        <tr>
                            <th>Voter's Address</th>
                            <th>Registered</th>
                            <th>Has Voted</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic content will be added here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Voting interface after voting starts -->
        <div id="votingInterface" class="mt-4" style="display:none;">
            <h3 class="text-neon">Cast Your Vote</h3>
            <p class="text-neon">Select your choice of President and cast your vote:</p>
            <select id="proposalSelect" class="form-select"></select>
            <button class="btn btn-neon mt-2" id="castVoteButton">Cast Vote</button>
        </div>

        <!-- Display winning proposal after voting ends -->
        <div id="displayWinnerSection" class="mt-4" style="display:none;">
            <button class="btn btn-info neon-btn" id="showWinnerButton">Show Winning Proposal</button>
            <p id="winningProposalText" class="mt-2 text-neon"></p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="static/voting.js"></script>
</body>
</html>
